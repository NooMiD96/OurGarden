<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        @(
            String.IsNullOrEmpty(ViewData["seoTitle"] as String)
                ? "Наш Сад"
                : $"{ViewData["seoTitle"]} | Наш Сад"
        )
    </title>
    @* data-rh="true" нужен для react-helmet, чтобы перетирать *@
    <meta name="description" content="@(ViewData["seoDescription"] ?? "")" data-rh="true" />
    <meta name="keywords" content="@(ViewData["seoKeywords"] ?? "")" data-rh="true" />
    <base href="~/" />

    <link rel="apple-touch-icon" sizes="180x180" href="~/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/favicon-16x16.png">
    <link rel="manifest" href="~/site.webmanifest">
    <link rel="mask-icon" href="~/safari-pinned-tab.svg" color="#5fd55b">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="~/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <environment include="Development,Production">
        <!-- Yandex.Metrika counter -->
        <script type="text/javascript">
            (function (m, e, t, r, i, k, a) {
                m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
                m[i].l = 1 * new Date(); k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
            })
                (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

            ym(@(ViewData["yandexMetrikaCounterId"] ?? 0), "init", {
                clickmap: true,
                trackLinks: true,
                accurateTrackBounce: true,
                webvisor: true
            });
        </script>
        <!-- /Yandex.Metrika counter -->
    </environment>

    <environment include="Production">
        <!-- JivoSite -->
        <script src="//code.jivosite.com/widget.js" data-jv-id="@(ViewData["jivoSiteId"] ?? "")" async></script>
        <script>
            function jivo_onOpen() {
                ym(@(ViewData["yandexMetrikaCounterId"] ?? 0), "reachGoal", "JIVO_CLICK")
            }
        </script>
        <!-- /JivoSite -->
    </environment>

    @if (ViewData["jsBundles"] != null)
    {
        @foreach (var bundle in (IEnumerable<string>)ViewData["jsBundles"])
        {
            <script src="@bundle"></script>
        }
    }

    @if (ViewData["cssBundles"] != null)
    {
        @foreach (var bundle in (IEnumerable<string>)ViewData["cssBundles"])
        {
            <link href="@bundle" rel="stylesheet" />
        }
    }
    <style id="jss-server-side">@(Html.Raw(ViewData["stringCss"]))</style>
</head>
<body>
    <environment include="Production">
        <!-- Yandex.Metrika counter -->
        <noscript>
            <div><img src="https://mc.yandex.ru/watch/@(ViewData["yandexMetrikaCounterId"] ?? 0)" style="position:absolute; left:-9999px;" alt="" /></div>
        </noscript>
        <!-- /Yandex.Metrika counter -->
    </environment>

    @RenderBody()
</body>
</html>
